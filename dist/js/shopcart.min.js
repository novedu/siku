"use strict";for(var data=JSON.parse(localStorage.data),i=0;i<data.length;i++){var str="<tr order = ".concat(data[i].order,'>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input class = "xuan" type="checkbox" >\n\t\t\t\t\t\t<img src="').concat(data[i].src,'" alt=""></td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<p>').concat(data[i].name,'</p>\n\t\t\t\t\t\t<p>最小订货量：1套</p>\n\t\t\t\t\t\t<p>库存：有库存</p>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td id="money">￥').concat(data[i].price,'</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<div class="zuo">-</div>\n\t\t\t\t\t\t<div class="num">').concat(data[i].num,'</div>\n\t\t\t\t\t\t<div class="you">+</div>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td id ="sum">').concat((data[i].price*data[i].num).toFixed(2),'</td>\n\t\t\t\t\t<td><a id ="del" href="javascript:;">删除</a></td>\n\t\t\t\t</tr>');$("tbody").append(str)}function _num(t){for(var n=0;n<data.length;n++){var e=$(t).parent().parent().attr("order");data[n].order==e&&(data[n].num=$(t).parent().children(".num").html(),$(t).parent().next().html((data[n].price*data[n].num).toFixed(2)))}localStorage.data=JSON.stringify(data)}$(".you").click(function(){var t,n,e,a;$(this).parent().children(".num").html(parseInt($(this).parent().children(".num").html())+1),_num(this),$(this).parent().parent().find(".xuan")[0].checked&&(t=/((\d|\.)+)/,n=Number(t.exec($("#good_num").html())[1]),e=Number(t.exec($("#rmb").html())[1]),a=Number(t.exec($(this).parent().parent().find("#money").html())[1]),$("#good_num").html("已选"+(n+1)+"件商品"),$("#rmb").html("总计应付:<br>￥"+(e+a).toFixed(2)+"元"))}),$(".zuo").click(function(){var t,n,e,a;"1"==$(this).parent().children(".num").html()?$(this).parent().children(".num").html(1):($(this).parent().children(".num").html(parseInt($(this).parent().children(".num").html())-1),_num(this),$(this).parent().parent().find(".xuan")[0].checked&&(t=/((\d|\.)+)/,n=Number(t.exec($("#good_num").html())[1]),e=Number(t.exec($("#rmb").html())[1]),a=Number(t.exec($(this).parent().parent().find("#money").html())[1]),$("#good_num").html("已选"+(n-1)+"件商品"),$("#rmb").html("总计应付:<br>￥"+(e-a).toFixed(2)+"元")))});for(var all=document.querySelectorAll(".all"),xuan=document.querySelectorAll(".xuan"),_loop=function(){var a=!0;all[i].onclick=function(){if(a){for(var t=0,n=0,e=0;e<xuan.length;e++)xuan[e].checked=!0,t+=Number($(".xuan:eq("+e+")").parent().parent().find(".num").html()),n+=Number($(".xuan:eq("+e+")").parent().parent().find("#sum").html());$("#good_num").html("已选"+t+"件商品"),$("#rmb").html("总计应付:￥"+n.toFixed(2)+"元"),a=!1}else{for(e=0;e<xuan.length;e++)xuan[e].checked=!1;a=!0,$("#good_num").html("已选0件商品"),$("#rmb").html("总计应付:<br>￥0.00元")}}},i=0;i<all.length;i++)_loop();function remove(){document.querySelector("#del").onclick=function(){$(this).parent().parent().remove(),data.splice(0,1),localStorage.data=JSON.stringify(data)}}function pay(){$(".button").click(function(){var t=Number(/((\d|\.)+)/.exec($("#rmb").html())[1]).toFixed(2);$(".modal").find("h2").html("总计应付:".concat(t,"元"))})}$(".xuan").click(function(){var t=Number($(this).parent().parent().find(".num").html()),n=Number($(this).parent().parent().find("#sum").html()),e=/((\d|\.)+)/,a=Number(e.exec($("#good_num").html())[1]),r=Number(e.exec($("#rmb").html())[1]);this.checked?($("#good_num").html("已选"+(a+t)+"件商品"),$("#rmb").html("总计应付:<br>￥"+(r+n).toFixed(2)+"元")):($("#good_num").html("已选"+(a-t)+"件商品"),$("#rmb").html("总计应付:<br>￥"+(r-n).toFixed(2)+"元"))}),remove(),$("#rem").click(function(){for(var t=[],n=0;n<$(".xuan").size();n++)$(".xuan").eq(n)[0].checked&&t.push($(".xuan").eq(n).parent().parent().attr("order"));for(var e=0;e<t.length;e++){for(var a=0;a<$(".xuan").size();a++)t[e]==$(".xuan").eq(a).parent().parent().attr("order")&&$(".xuan").eq(a).parent().parent().remove();for(var r=0;r<data.length;r++)t[e]==data[r].order&&data.splice(r,1);localStorage.data=JSON.stringify(data)}}),pay();